---
title: "환경변수 .env 제대로 쓰는 법"
emoji: "🔐"
category: "it"
tags: ["보안", "DevOps"]
difficulty: 1
style: "gradient"
pubDate: "2026-02-15"
storyType: "twist"
---

<!-- step:hook -->

2021년, 한 스타트업이 하루 만에 10만 달러를 잃었습니다. 원인? GitHub에 올라간 `.env` 파일 하나. AWS 키가 노출되자 해커들이 **자동으로** 서버를 점령했죠. 당신의 `.env`는 안전한가요?

<!-- step:story -->

신입 개발자 제이는 첫 프로젝트에서 API 키를 하드코딩했습니다. 시니어가 지적했죠. "환경변수 써야지. `.env` 파일 만들어."

제이는 `.env` 파일을 만들고, 기쁜 마음으로 커밋했습니다. `git add .`로 전체를 올렸죠. 푸시하자마자 **GitHub 경고 이메일**이 날아왔습니다. "Exposed API Key Detected."

15분 뒤, 회사 AWS 콘솔에 알 수 없는 EC2 인스턴스 50개가 실행 중이었습니다. 해커들이 자동 봇으로 키를 찾아내서 **암호화폐 채굴**에 사용한 거죠. 청구서는 10만 달러.

제이는 즉시 키를 재발급하고, `.gitignore`에 `.env`를 추가했습니다. 하지만 이미 GitHub 히스토리에 남았기에, **레포 전체를 삭제**해야 했습니다.

그날 배운 교훈: "환경변수는 코드가 아니라 **비밀**이다."

<!-- step:reveal -->

**환경변수 .env 필수 규칙:**

**1. .env는 반드시 .gitignore에 추가**
- 비밀키가 GitHub에 노출되면 **자동 해킹 봇**이 탐지
- `.gitignore`에 `.env`, `.env.local` 추가 필수

**2. 클라이언트 노출은 접두사로 구분**
- **Next.js**: `NEXT_PUBLIC_` 접두사만 브라우저에서 접근 가능
- **Vite**: `VITE_` 접두사만 클라이언트에 노출
- 나머지는 서버 전용

**3. 우선순위 이해**
- `.env.local` > `.env.production` > `.env`
- 로컬 개발은 `.env.local`, 배포는 환경변수 설정

**4. 절대 커밋하지 말 것**
- API 키, DB 비밀번호, JWT 시크릿은 **절대 커밋 금지**
- `.env.example`로 템플릿만 공유

**5. 실수로 커밋했다면?**
- 즉시 키 재발급
- GitHub 히스토리에 남으므로 `git filter-branch`로 제거하거나 레포 삭제

<!-- step:action -->

**오늘부터 실천**: 지금 당장 `.gitignore`에 `.env`가 있는지 확인하세요. 없다면 추가하고, 이미 푸시한 적 있다면 **GitHub 히스토리를 검색**해보세요. 키가 노출됐다면 즉시 재발급. 환경변수 실수는 **회사를 망칠 수 있습니다**!
